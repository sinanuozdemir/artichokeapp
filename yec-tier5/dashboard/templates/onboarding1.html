<!DOCTYPE html>
{% load staticfiles %}
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Legion Analytics is the easiest way to analyze your email lists. Use predictive analytics to target customers and deliver better content.">
	<meta name="author" content="Tier5">
	<meta name="keyword" content="Legion Analytics, email dashboard, social media analytics, tier5, blogger subscriber dashboard, free subscriber analytics, predictive analytics dashboard, trust based marketing">
	<title>Legion Analytics-Onboarding Upload</title>
	<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<link type="text/css" rel="stylesheet" href="{% static "css/onboarding.css" %}" />

	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
	<script>
		(function (i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r;
			i[r] = i[r] || function () {
				(i[r].q = i[r].q || []).push(arguments)
			}, i[r].l = 1 * new Date();
			a = s.createElement(o),
				m = s.getElementsByTagName(o)[0];
			a.async = 1;
			a.src = g;
			m.parentNode.insertBefore(a, m)
		})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-62659538-1', 'auto');
		ga('send', 'pageview');
	</script>
</head>

<body>
	<div class="container">
		<form name="uploadedCSV" enctype="multipart/form-data" method="post"> {% csrf_token %}
			<div class="row">
				<div class="col-md-4">

				</div>
				<div class="col-md-4 center-bracket">
					<img class="yay-logo" src="{% static "img/redlogotier5.svg" %}" />
					<div class="water"></div>
					<div class="water water-alt"></div>
					<p class="invalidFile invisible">Invalid File</p>
					<input id="uploadFile"/>
					<div class="fileUpload btn btn-ok">
						<span>Upload CSV</span>
						<input id="uploadBtn" enctype="multipart/form-data" name="uploaded_csv" type="file" class="upload" />
					</div>

					<div>
						<h3 class="success"><strong>Welcome, {{request.session.first_name}}!</strong></h3>
					</div>
					<div class="subtitle-container">
						<p class="success-subtitle">Thanks for signing up with Legion Analytics!
							<br>Upload a CSV file to get some awesome data.</p>
					</div>
					<div>
						<a href="#" data-toggle="modal" data-target="#myModal">
							<p class="omg-help">Should my file be in a specific format?</p>
						</a>
					</div>
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog modal-lg">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
									</button>
									<h4 class="modal-title" id="myModalLabel">What should my file look like?&nbsp;&nbsp;&nbsp; ¯\_(ツ)_/¯</h4>
								</div>
								<div class="modal-body">


									<p class="modal-heading">The following format is accepted by <strong>Legion</strong> Analytics</p>
									<p class="modal-subheading"><strong>Legion</strong> Analytics will accept a CSV when only one column consists of <em>only emails</em> in the format example@domain.com. The header does not matter.</p>
									<img class="correctFormat" src="{% static "img/correctFormat.png" %}" />
								</div>
								<div class="modal-footer">
								</div>
							</div>
						</div>
					</div>

				</div>
				<div class="col-md-4">
					<img id="submitArrow" class="floating hidden" src="{% static "img/submitArrow.png" %}" />
					<input type="submit" disabled class="btn btn-default bt-lg not-allowed" id="onward_button" value="Onward!"></input>
					<div class="step-2 black"></div>
					<div class="step-3 "></div>
					<div class="step-4"></div>
				</div>

			</div>
		</form>
	</div>
</body>
<script>
	document.getElementById("uploadBtn").onchange = function () {
		if (this.value.indexOf(".csv") != -1) {
			document.getElementById("uploadFile").value = this.value.substring(this.value.indexOf("path/")+13);
			$("#submitArrow").fadeIn(1500).removeClass("hidden");
			$("#onward_button").prop("disabled", false);
			$("#onward_button").removeClass("not-allowed");
			}
		if (this.value.indexOf(".csv") == -1) {
			$("#uploadFile").css({
				border: "2px #cd6562 solid",
				animation: "invalid .2s linear",
			});
			$(".invalidFile").removeClass("invisible");
			setTimeout(function () {
				$("#uploadFile").css({
					border: "none",
					animation: "none",
				});
				$(".invalidFile").addClass("invisible");
			}, 5000);
		}
	};
</script>

</html>